<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM
"http://java.sun.com/dtd/properties.dtd">
<properties>
	<entry key="getListCount">
		SELECT
    		    COUNT(*)
		   FROM NOTICE
		  WHERE NOTICE_TYPE = '소셜링'
            AND NOTICE_STATUS = 'N'
	</entry>
	
	<entry key="selectList">
		SELECT * 
		  FROM(SELECT ROWNUM RNUM, A.*
				 FROM(SELECT
						     NOTICE_NUM
						   , NOTICE_TITLE
		                   , USER_NAME
						   , S_PLACE
						   , S_DATE
						   , S_TIME
						   , S_TYPE
						   , ROUTE
						   , CHANGE_NAME
						   , NOTICE_STATUS
		                FROM NOTICE
						JOIN MEMBER_INFO USING(USER_ID)
						JOIN SOCIALING USING(NOTICE_NUM)
						JOIN TBL_FILE USING(NOTICE_NUM)
						WHERE NOTICE_TYPE = '소셜링'
						  AND NOTICE_STATUS = 'N'
					    ORDER BY NOTICE_NUM DESC) A)
		WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	<entry key="increaseCount">
		UPDATE NOTICE
		   SET NCOUNT = NCOUNT + 1
		 WHERE NOTICE_NUM = ?
	</entry>
	
	<entry key="selectSocialing">
		SELECT
			   NOTICE_NUM
			 , NOTICE_TITLE
			 , NOTICE_CONTENT
			 , USER_ID
			 , USER_NAME
			 , NCOUNT
			 , S_PLACE
			 , S_DATE
			 , S_TIME
			 , S_TYPE
			 , MAX_MEMBER
			 , MIN_MEMBER
			 , PROFILE
			 , INTRODUCTION
		  FROM NOTICE
		  JOIN MEMBER_INFO USING(USER_ID)
		  JOIN SOCIALING USING(NOTICE_NUM)
		  JOIN PROFILE USING(USER_ID)
		 WHERE NOTICE_TYPE = '소셜링'
		   AND NOTICE_STATUS = 'N'
		   AND NOTICE_NUM = ?
	</entry>
	
	<entry key="selectPhotoList">
		SELECT
			   FILE_NUM
			 , ROUTE
			 , ORIGIN_NAME
			 , CHANGE_NAME
			 , FILE_LEVEL
		  FROM TBL_FILE
		 WHERE NOTICE_NUM = ?
		   AND STATUS = 'Y'
		 ORDER BY FILE_NUM
	</entry>
	
	<entry key="selectMember">
		SELECT
			   USER_ID
			 , S_STATUS
	         , USER_NAME
	         , PROFILE
	         , INTRODUCTION
	      FROM SOCIALING_MEMBER
	      JOIN MEMBER_INFO USING(USER_ID)
	      JOIN PROFILE USING(USER_ID)
	     WHERE NOTICE_NUM = ?
	</entry>
	
	<entry key="insertMember">
		INSERT
		  INTO SOCIALING_MEMBER
		VALUES
		(
			?
		  , ?
		  , DEFAULT
		)
	</entry>
	
	<entry key="updateMember">
		UPDATE SOCIALING_MEMBER
		   SET S_STATUS = 'Y'
		 WHERE NOTICE_NUM = ?
		   AND USER_ID = ?
	</entry>
	
	<entry key="insertNotice">
		INSERT
		  INTO NOTICE
		(
			NOTICE_NUM
		  , NOTICE_TITLE
		  , NOTICE_CONTENT
		  , NOTICE_DATE
		  , NOTICE_STATUS
		  , NOTICE_TYPE
		  , USER_ID
		  , MODIFY_DATE
		  , NCOUNT
		)
		VALUES
		(
			SEQ_BNUM.NEXTVAL
		  , ?
		  , ?
		  , DEFAULT
		  , DEFAULT
		  , '소셜링'
		  , ?
		  , SYSDATE
		  , DEFAULT
		)
	</entry>
	
	<entry key="insertSocialing">
		INSERT
		  INTO SOCIALING
		(
			NOTICE_NUM
		  , S_PLACE
		  , S_DATE
		  , S_TYPE
		  , MAX_MEMBER
		  , MIN_MEMBER
		  , S_TIME
		)
		VALUES
		(
			SEQ_BNUM.CURRVAL
		  , ?
		  , ?
		  , ?
		  , ?
		  , ?
		  , ?
		)
	</entry>
	
	<entry key="insertFile">
		INSERT
		  INTO TBL_FILE
		(
			FILE_NUM
		  , NOTICE_NUM
		  , ROUTE
		  , ORIGIN_NAME
		  , FILE_LEVEL
		  , CHANGE_NAME
		  , STATUS
		)
		VALUES
		(
			SEQ_FNUM.NEXTVAL
		  , SEQ_BNUM.CURRVAL
		  , ?
		  , ?
		  , ?
		  , ?
		  , 'Y'
		)
	</entry>
</properties>